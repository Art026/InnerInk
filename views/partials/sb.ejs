<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="sidebarstyles.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
     
</head>
<body>
  <div class="sidebar">
    <div class="logo-details">
      <img src="ink.png" alt="" class='bx bxl-c-plus-plus icon' style="height: 50px; width: 150px; margin-right: 10px;">
      <i class='bx bx-menu' id="btn" ></i>
    </div>
    <ul class="nav-list">
      <li>
        <a href="/userhome">
          <i class='bx bx-grid-alt'></i>
          <span class="links_name">Today</span>
        </a>
         <span class="tooltip">Today</span>
      </li>
      <li style="position: relative;
      margin: 8px 0;
      list-style: none;">
       <a href="/calendar" style="padding: 14px 0;">
         <img id="calendaricon" class='bx bx-grid-alt' src="calendar(1).png">
         <span class="links_name">Calendar</span>
       </a>
       <span class="tooltip">Calendar</span>
     </li>
     <li style="position: relative;
      margin: 8px 0;
      list-style: none;">
       <a id="timeline-link" href="#" style="padding: 14px 0;">
         <img id="calendaricon" class='bx bx-grid-alt' src="timeline.png">
         <span class="links_name">Timeline</span>
       </a>
       <span class="tooltip">Timeline</span>
     </li> <br>

    <li style="position: relative;
    margin: 8px 0;
    list-style: none;">
       <a href="#">
         <a href="/journals" style="padding: 12px 0;"><span class="links_name"><h4> &nbsp; Journals</h4></span> </a>
       </a>
     </li>
     <li style="position: relative;
      margin: 8px 0;
      list-style: none;">
       <a href="/jtype" style="padding: 14px 0;">
         <img id="calendaricon" class='bx bx-grid-alt' src="book.png">
         <span class="links_name">Journal</span>
       </a>
       <span class="tooltip">Journal</span>
     </li>
     <li>
      <a href="/reflect">
        <i class='bx bx-chat' ></i>
        <span class="links_name">Reflect</span>
      </a>
      <span class="tooltip">Reflect</span>
    </li> 
    <li style="position: relative;
    margin: 8px 0;
    list-style: none;">
     <a href="/newgoal" style="padding: 14px 0;">
       <img id="calendaricon" class='bx bx-grid-alt' src="target.png">
       <span class="links_name">Goals</span>
     </a>
     <span class="tooltip">Goals</span>
    </li>

    <li class="profile">
        <a href="/logout" style="padding: 12px 5px;">
            <i class='bx bx-log-out' id="log_out"></i>
            <span class="links_name">Logout</span>
        </a>        
    </li>
    </ul>
  </div>

<script>
        let sidebar = document.querySelector(".sidebar");
        let closeBtn = document.querySelector("#btn");

        closeBtn.addEventListener("click", ()=>{
            sidebar.classList.toggle("open");
            menuBtnChange();
        });
        function menuBtnChange() {
        if(sidebar.classList.contains("open")){
            closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");
        }else {
            closeBtn.classList.replace("bx-menu-alt-right","bx-menu");
        }
        }
</script>
<script>
  document.addEventListener("DOMContentLoaded", function() {
      const timelineLink = document.getElementById("timeline-link");
      if (timelineLink) {
          timelineLink.addEventListener("click", async function(event) {
              event.preventDefault(); // Prevent default link behavior
              const userId = '<%= user._id %>'; // Accessing the user ID from EJS
              
              try {
                  const response = await fetch('/timeline?userId=' + userId);
                  if (!response.ok) {
                      throw new Error('Failed to fetch timeline entries');
                  }
                  window.location.href = '/timeline?userId=' + userId;
              } catch (error) {
                  console.error(error);
              }
          });
      }
  });
  </script>
</body>
</html>