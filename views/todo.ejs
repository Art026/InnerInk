<!DOCTYPE html>
<html lang="en" data-theme="night">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/todostyle.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">
    <link rel="stylesheet" href="sidebarstyles.css">
    <link href='https://unpkg.com/boxicons@2.0.7/css/boxicons.min.css' rel='stylesheet'>
    <link href="https://cdn.jsdelivr.net/npm/daisyui@2.18.0/dist/full.css" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/tailwindcss@2.2/dist/tailwind.min.css" rel="stylesheet" type="text/css" />
    <link href='https://unpkg.com/boxicons@2.1.2/css/boxicons.min.css' rel='stylesheet'>

    <title>GOALS</title>
</head>
<body>
<div class="sidebar">
    <div class="logo-details">
      <img src="ink.png" alt="" class='bx bxl-c-plus-plus icon' style="height: 50px; width: 150px; margin-right: 10px;">
      <i class='bx bx-menu' id="btn" ></i>
    </div>
    <ul class="nav-list">
      <li>
        <a href="/userhome">
          <i class='bx bx-grid-alt'></i>
          <span class="links_name">Today</span>
        </a>
         <span class="tooltip">Today</span>
      </li>
      <li style="position: relative;
      margin: 8px 0;
      list-style: none;">
       <a href="/calendar" style="padding: 14px 0;">
         <img id="calendaricon" class='bx bx-grid-alt' src="calendar(1).png">
         <span class="links_name">Calendar</span>
       </a>
       <span class="tooltip">Calendar</span>
     </li> <br>

    <li style="position: relative;
    margin: 8px 0;
    list-style: none;">
       <a href="#">
         <a href="/journals" style="padding: 12px 0;"><span class="links_name"><h4> &nbsp; Journals</h4></span> </a>
       </a>
     </li>
     <li style="position: relative;
      margin: 8px 0;
      list-style: none;">
       <a href="/jtype" style="padding: 14px 0;">
         <img id="calendaricon" class='bx bx-grid-alt' src="book.png">
         <span class="links_name">Journal</span>
       </a>
       <span class="tooltip">Journal</span>
     </li>
     <li>
      <a href="/reflect">
        <i class='bx bx-chat' ></i>
        <span class="links_name">Reflect</span>
      </a>
      <span class="tooltip">Reflect</span>
    </li> 
    <li style="position: relative;
    margin: 8px 0;
    list-style: none;">
     <a href="/newgoal" style="padding: 14px 0;">
       <img id="calendaricon" class='bx bx-grid-alt' src="target.png">
       <span class="links_name">Goals</span>
     </a>
     <span class="tooltip">Goals</span>
    </li>

    <li class="profile">
        <a href="/logout" style="padding: 12px 5px;">
            <i class='bx bx-log-out' id="log_out"></i>
            <span class="links_name">Logout</span>
        </a>        
    </li>
    </ul>
  </div>
<section class="home-section">
        <div class="container">
          <header>
              <h1>Todo List</h1>
              <!-- Error message -->
              <div class="alert-message"></div>
              <div class="input-section">
                  <input type="text" placeholder="Add a todo . . ." class="input input-bordered input-secondary w-full max-w-xs" />
                  <input type="date" class="input input-bordered input-secondary w-full max-w-xs schedule-date" />
                  <button class="btn btn-secondary add-task-button">
                      <i class="bx bx-plus bx-sm"></i>
                  </button>
              </div>
          </header>
  
          <div class="todos-filter">
              <div class="dropdown">
                  <label tabindex="0" class="btn m-1">Filter</label>
                  <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
                      <li onclick="filterTodos('all')"><a>All</a></li>
                      <li onclick="filterTodos('pending')"><a>Pending</a></li>
                      <li onclick="filterTodos('completed')"><a>Completed</a></li>
                  </ul>
              </div>
              <button class="btn btn-secondary delete-all-btn">
                  Delete All
              </button>
          </div>
  
           <table class="table w-full">
              <thead>
                  <tr>
                      <th>Task</th>
                      <th>Due Date</th>
                      <th>Status</th>
                      <th>Actions</th>
                  </tr>
              </thead>
              <tbody class="todos-list-body">
              </tbody>
          </table>
  
      </div>

      <div class="theme-switcher">
          <div class="dropdown dropdown-left">
              <label tabindex="0" class="btn m-1">
                  <i class='bx bxs-palette bx-sm'></i>
              </label>
              <ul tabindex="0" class="dropdown-content menu p-2 shadow bg-base-100 rounded-box w-52">
                  <li class="theme-item" theme="cupcake"><a>cupcake</a></li>
                  <li class="theme-item" theme="dark"><a>dark</a></li>
                  <li class="theme-item" theme="light"><a>light</a></li>
                  <li class="theme-item" theme="bumblebee"><a>bumblebee</a></li>
                  <li class="theme-item" theme="synthwave"><a>synthwave</a></li>
                  <li class="theme-item" theme="halloween"><a>halloween</a></li>
                  <li class="theme-item" theme="fantasy"><a>fantasy</a></li>
                  <li class="theme-item" theme="dracula"><a>dracula</a></li>
                  <li class="theme-item" theme="aqua"><a>aqua</a></li>
                  <li class="theme-item" theme="luxury"><a>luxury</a></li>
                  <li class="theme-item" theme="night"><a>night</a></li>
              </ul>
          </div>
      </div>
</section>
<script src="js/todomain.js"></script>


<script>
        let sidebar = document.querySelector(".sidebar");
        let closeBtn = document.querySelector("#btn");
        // let searchBtn = document.querySelector(".bx-search");

        closeBtn.addEventListener("click", ()=>{
            sidebar.classList.toggle("open");
            menuBtnChange();//calling the function(optional)
        });
        function menuBtnChange() {
        if(sidebar.classList.contains("open")){
            closeBtn.classList.replace("bx-menu", "bx-menu-alt-right");//replacing the iocns class
        }else {
            closeBtn.classList.replace("bx-menu-alt-right","bx-menu");//replacing the iocns class
        }
        }

</script>


<script src="https://code.jquery.com/jquery-3.2.1.slim.min.js" integrity="sha384-KJ3o2DKtIkvYIK3UENzmM7KCkRr/rE9/Qpg6aAZGJwFDMVNA/GpGFF93hXpG5KkN" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/popper.js@1.12.9/dist/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.0.0/dist/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>

<script>
  const taskInput = document.getElementById('taskinput');
  const dateInput = document.getElementById('dateinput')
  const addButton = document.getElementById('addButton');
  const todosListBody = document.querySelector(".todos-list-body");

  addButton.addEventListener("click", async () => {
      const task = taskInput.value;
      const dueDate = dateInput.value;
      console.log('hi');
      console.log(taskInput);
      console.log(dateInput);
      console.log(taskInput.value);
      console.log(dateInput.value);
      try {
          const response = await fetch('/addTodo', {
              method: 'POST',
              headers: {
                  'Content-Type': 'application/json'
              },
              body: JSON.stringify({ task, dueDate })
          });

          if (!response.ok) {
              throw new Error('Failed to add todo');
          }

          const data = await response.json();

          const newRow = document.createElement("tr");
          newRow.innerHTML = `
              <td>${data.todo.task}</td>
              <td>${data.todo.dueDate}</td>
              <td>${data.todo.status}</td>
              <td>
                  <button class="btn btn-warning btn-sm">
                      <i class="bx bx-edit-alt bx-bx-xs"></i>
                  </button>
                  <button class="btn btn-success btn-sm">
                      <i class="bx bx-check bx-xs"></i>
                  </button>
                  <button class="btn btn-error btn-sm">
                      <i class="bx bx-trash bx-xs"></i>
                  </button>
              </td>
          `;

          todosListBody.appendChild(newRow);

          taskInput.value = "";
          dateInput.value = "";

      } catch (error) {
          console.error('Error adding todo:', error);
      }
  });
</script>


</body>
</html>
